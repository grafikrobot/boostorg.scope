<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Class template scope_exit</title>
<link rel="stylesheet" href="../../../../../../doc/src/boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets Vsnapshot">
<link rel="home" href="../../index.html" title="Chapter 1. Boost.Scope">
<link rel="up" href="../../reference.html#header.boost.scope.scope_exit_hpp" title="Header &lt;boost/scope/scope_exit.hpp&gt;">
<link rel="prev" href="fd_deleter.html" title="Struct fd_deleter">
<link rel="next" href="make_scope_exit.html" title="Function template make_scope_exit">
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table cellpadding="2" width="100%"><tr><td valign="top"><img alt="Boost C++ Libraries" width="277" height="86" src="../../../../../../boost.png"></td></tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="fd_deleter.html"><img src="../../../../../../doc/src/images/prev.png" alt="Prev"></a><a accesskey="u" href="../../reference.html#header.boost.scope.scope_exit_hpp"><img src="../../../../../../doc/src/images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="../../../../../../doc/src/images/home.png" alt="Home"></a><a accesskey="n" href="make_scope_exit.html"><img src="../../../../../../doc/src/images/next.png" alt="Next"></a>
</div>
<div class="refentry">
<a name="boost.scope.scope_exit"></a><div class="titlepage"></div>
<div class="refnamediv">
<h2><span class="refentrytitle">Class template scope_exit</span></h2>
<p>boost::scope::scope_exit — Scope exit guard that invokes a function upon leaving the scope. </p>
</div>
<h2 class="refsynopsisdiv-title">Synopsis</h2>
<div class="refsynopsisdiv"><pre class="synopsis"><span class="comment">// In header: &lt;<a class="link" href="../../reference.html#header.boost.scope.scope_exit_hpp" title="Header &lt;boost/scope/scope_exit.hpp&gt;">boost/scope/scope_exit.hpp</a>&gt;

</span><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> Func<span class="special">&gt;</span> 
<span class="keyword">class</span> <a class="link" href="scope_exit.html" title="Class template scope_exit">scope_exit</a> <span class="special">{</span>
<span class="keyword">public</span><span class="special">:</span>
  <span class="comment">// <a class="link" href="scope_exit.html#boost.scope.scope_exitconstruct-copy-destruct">construct/copy/destruct</a></span>
  <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> F<span class="special">&gt;</span> <span class="keyword">explicit</span> <a class="link" href="scope_exit.html#idm1742-bb"><span class="identifier">scope_exit</span></a><span class="special">(</span><span class="identifier">F</span> <span class="special">&amp;&amp;</span><span class="special">,</span> <span class="keyword">bool</span> <span class="special">=</span> <span class="keyword">true</span><span class="special">)</span> <span class="keyword">noexcept</span><span class="special">(</span><span class="special">...</span><span class="special">)</span><span class="special">;</span>
  <a class="link" href="scope_exit.html#idm1778-bb"><span class="identifier">scope_exit</span></a><span class="special">(</span><a class="link" href="scope_exit.html" title="Class template scope_exit">scope_exit</a> <span class="special">&amp;&amp;</span><span class="special">)</span> <span class="keyword">noexcept</span><span class="special">(</span><span class="special">...</span><span class="special">)</span><span class="special">;</span>
  <a class="link" href="scope_exit.html#idm1806-bb"><span class="identifier">scope_exit</span></a><span class="special">(</span><a class="link" href="scope_exit.html" title="Class template scope_exit">scope_exit</a> <span class="keyword">const</span> <span class="special">&amp;</span><span class="special">)</span> <span class="special">=</span> <span class="keyword">delete</span><span class="special">;</span>
  <a class="link" href="scope_exit.html" title="Class template scope_exit">scope_exit</a> <span class="special">&amp;</span> <a class="link" href="scope_exit.html#idm1800-bb"><span class="keyword">operator</span><span class="special">=</span></a><span class="special">(</span><a class="link" href="scope_exit.html" title="Class template scope_exit">scope_exit</a> <span class="special">&amp;&amp;</span><span class="special">)</span> <span class="special">=</span> <span class="keyword">delete</span><span class="special">;</span>
  <a class="link" href="scope_exit.html" title="Class template scope_exit">scope_exit</a> <span class="special">&amp;</span> <a class="link" href="scope_exit.html#idm1810-bb"><span class="keyword">operator</span><span class="special">=</span></a><span class="special">(</span><a class="link" href="scope_exit.html" title="Class template scope_exit">scope_exit</a> <span class="keyword">const</span> <span class="special">&amp;</span><span class="special">)</span> <span class="special">=</span> <span class="keyword">delete</span><span class="special">;</span>
  <a class="link" href="scope_exit.html#idm1816-bb"><span class="special">~</span><span class="identifier">scope_exit</span></a><span class="special">(</span><span class="special">)</span><span class="special">;</span>

  <span class="comment">// <a class="link" href="scope_exit.html#idm1706-bb">public member functions</a></span>
  <span class="keyword">bool</span> <a class="link" href="scope_exit.html#idm1707-bb"><span class="identifier">active</span></a><span class="special">(</span><span class="special">)</span> <span class="keyword">const</span> <span class="keyword">noexcept</span><span class="special">;</span>
  <span class="keyword">void</span> <a class="link" href="scope_exit.html#idm1715-bb"><span class="identifier">set_active</span></a><span class="special">(</span><span class="keyword">bool</span><span class="special">)</span> <span class="keyword">noexcept</span><span class="special">;</span>
  <span class="keyword">void</span> <a class="link" href="scope_exit.html#idm1729-bb"><span class="identifier">release</span></a><span class="special">(</span><span class="special">)</span> <span class="keyword">noexcept</span><span class="special">;</span>
<span class="special">}</span><span class="special">;</span></pre></div>
<div class="refsect1">
<a name="idm2016"></a><h2>Description</h2>
<p>A scope exit guard wraps a function object callable with no arguments that can be one of:</p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem"><p>A user-defined class with a public <code class="computeroutput">operator()</code>. </p></li>
<li class="listitem"><p>An lvalue reference to such class. </p></li>
<li class="listitem"><p>An lvalue reference to function taking no arguments.</p></li>
</ul></div>
<p>
The scope guard can be in either active or inactive state. By default, the constructed scope guard is active. When active, the scope guard invokes the wrapped function object on destruction. If inactive, the scope guard does not call the wrapped function object.</p>
<p>The scope guard can be made inactive by moving-from the scope guard or calling <code class="computeroutput">set_active(false)</code> or <code class="computeroutput">release()</code>. An inactive scope guard can be made active by calling <code class="computeroutput">set_active(true)</code>. If a moved-from scope guard is active on destruction, the behavior is undefined. </p>
<div class="refsect2">
<a name="idm2032"></a><h3>
<a name="boost.scope.scope_exitconstruct-copy-destruct"></a><code class="computeroutput">scope_exit</code> 
        public
       construct/copy/destruct</h3>
<div class="orderedlist"><ol class="orderedlist" type="1">
<li class="listitem">
<pre class="literallayout"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> F<span class="special">&gt;</span> 
  <span class="keyword">explicit</span> <a name="idm1742-bb"></a><span class="identifier">scope_exit</span><span class="special">(</span><span class="identifier">F</span> <span class="special">&amp;&amp;</span> func<span class="special">,</span> <span class="keyword">bool</span> active <span class="special">=</span> <span class="keyword">true</span><span class="special">)</span> <span class="keyword">noexcept</span><span class="special">(</span><span class="special">...</span><span class="special">)</span><span class="special">;</span></pre>Constructs a scope guard with a given callable function object. <p><span class="bold"><strong>Requires:</strong></span> <code class="computeroutput">Func</code> is constructible from <span class="emphasis"><em>func</em></span>.</p>
<p><span class="bold"><strong>Effects:</strong></span> If <code class="computeroutput">Func</code> is nothrow constructible from <code class="computeroutput">F&amp;&amp;</code> then constructs <code class="computeroutput">Func</code> from <code class="computeroutput">std::forward&lt; F &gt;(func)</code>, otherwise constructs from <code class="computeroutput">func</code>.</p>
<p>If <code class="computeroutput">Func</code> construction throws and <span class="emphasis"><em>active</em></span> is <code class="computeroutput">true</code>, invokes <span class="emphasis"><em>func</em></span> before returning with the exception.</p>
<p><span class="bold"><strong>Throws:</strong></span> Nothing, unless construction of the function object throws.</p>
<p>

</p>
<div class="variablelist"><table border="0" class="variablelist compact">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term">Parameters:</span></p></td>
<td><div class="variablelist"><table border="0" class="variablelist compact">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><code class="computeroutput">active</code></span></p></td>
<td><p>Indicates whether the scope guard should be active upon construction.</p></td>
</tr>
<tr>
<td><p><span class="term"><code class="computeroutput">func</code></span></p></td>
<td><p>The callable function object to invoke on destruction. </p></td>
</tr>
</tbody>
</table></div></td>
</tr>
<tr>
<td><p><span class="term">Postconditions:</span></p></td>
<td><p><code class="computeroutput">this-&gt;active() == active</code> </p></td>
</tr>
</tbody>
</table></div>
</li>
<li class="listitem">
<pre class="literallayout"><a name="idm1778-bb"></a><span class="identifier">scope_exit</span><span class="special">(</span><a class="link" href="scope_exit.html" title="Class template scope_exit">scope_exit</a> <span class="special">&amp;&amp;</span> that<span class="special">)</span> <span class="keyword">noexcept</span><span class="special">(</span><span class="special">...</span><span class="special">)</span><span class="special">;</span></pre>Move-constructs a scope guard. <p><span class="bold"><strong>Requires:</strong></span> <code class="computeroutput">Func</code> is nothrow move-constructible or copy-constructible.</p>
<p><span class="bold"><strong>Effects:</strong></span> If <code class="computeroutput">Func</code> is nothrow move-constructible then move-constructs <code class="computeroutput">Func</code> from a member of <span class="emphasis"><em>that</em></span>, otherwise copy-constructs.</p>
<p><span class="bold"><strong>Throws:</strong></span> Nothing, unless construction of the function object throws.</p>
<p>

</p>
<div class="variablelist"><table border="0" class="variablelist compact">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term">Parameters:</span></p></td>
<td><div class="variablelist"><table border="0" class="variablelist compact">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody><tr>
<td><p><span class="term"><code class="computeroutput">that</code></span></p></td>
<td><p>Move source.</p></td>
</tr></tbody>
</table></div></td>
</tr>
<tr>
<td><p><span class="term">Postconditions:</span></p></td>
<td><p><code class="computeroutput">that.active() == false</code> </p></td>
</tr>
</tbody>
</table></div>
</li>
<li class="listitem"><pre class="literallayout"><a name="idm1806-bb"></a><span class="identifier">scope_exit</span><span class="special">(</span><a class="link" href="scope_exit.html" title="Class template scope_exit">scope_exit</a> <span class="keyword">const</span> <span class="special">&amp;</span><span class="special">)</span> <span class="special">=</span> <span class="keyword">delete</span><span class="special">;</span></pre></li>
<li class="listitem"><pre class="literallayout"><a class="link" href="scope_exit.html" title="Class template scope_exit">scope_exit</a> <span class="special">&amp;</span> <a name="idm1800-bb"></a><span class="keyword">operator</span><span class="special">=</span><span class="special">(</span><a class="link" href="scope_exit.html" title="Class template scope_exit">scope_exit</a> <span class="special">&amp;&amp;</span><span class="special">)</span> <span class="special">=</span> <span class="keyword">delete</span><span class="special">;</span></pre></li>
<li class="listitem"><pre class="literallayout"><a class="link" href="scope_exit.html" title="Class template scope_exit">scope_exit</a> <span class="special">&amp;</span> <a name="idm1810-bb"></a><span class="keyword">operator</span><span class="special">=</span><span class="special">(</span><a class="link" href="scope_exit.html" title="Class template scope_exit">scope_exit</a> <span class="keyword">const</span> <span class="special">&amp;</span><span class="special">)</span> <span class="special">=</span> <span class="keyword">delete</span><span class="special">;</span></pre></li>
<li class="listitem">
<pre class="literallayout"><a name="idm1816-bb"></a><span class="special">~</span><span class="identifier">scope_exit</span><span class="special">(</span><span class="special">)</span><span class="special">;</span></pre>If <code class="computeroutput">active() == true</code>, invokes the wrapped callable function object. Destroys the callable. <p><span class="bold"><strong>Throws:</strong></span> Nothing, unless invoking the callable throws. </p>
</li>
</ol></div>
</div>
<div class="refsect2">
<a name="idm2195"></a><h3>
<a name="idm1706-bb"></a><code class="computeroutput">scope_exit</code> public member functions</h3>
<div class="orderedlist"><ol class="orderedlist" type="1">
<li class="listitem">
<pre class="literallayout"><span class="keyword">bool</span> <a name="idm1707-bb"></a><span class="identifier">active</span><span class="special">(</span><span class="special">)</span> <span class="keyword">const</span> <span class="keyword">noexcept</span><span class="special">;</span></pre>Returns <code class="computeroutput">true</code> if the scope guard is active, otherwise <code class="computeroutput">false</code>. <p><span class="bold"><strong>Throws:</strong></span> Nothing. </p>
</li>
<li class="listitem">
<pre class="literallayout"><span class="keyword">void</span> <a name="idm1715-bb"></a><span class="identifier">set_active</span><span class="special">(</span><span class="keyword">bool</span> active<span class="special">)</span> <span class="keyword">noexcept</span><span class="special">;</span></pre>Activates or deactivates the scope guard. <p><span class="bold"><strong>Throws:</strong></span> Nothing.</p>
<p>

</p>
<div class="variablelist"><table border="0" class="variablelist compact">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term">Parameters:</span></p></td>
<td><div class="variablelist"><table border="0" class="variablelist compact">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody><tr>
<td><p><span class="term"><code class="computeroutput">active</code></span></p></td>
<td><p>The active status to set.</p></td>
</tr></tbody>
</table></div></td>
</tr>
<tr>
<td><p><span class="term">Postconditions:</span></p></td>
<td><p><code class="computeroutput">this-&gt;active() == active</code> </p></td>
</tr>
</tbody>
</table></div>
</li>
<li class="listitem">
<pre class="literallayout"><span class="keyword">void</span> <a name="idm1729-bb"></a><span class="identifier">release</span><span class="special">(</span><span class="special">)</span> <span class="keyword">noexcept</span><span class="special">;</span></pre>Deactivates the scope guard. <p><span class="bold"><strong>Effects:</strong></span> As if <code class="computeroutput">set_active(false)</code>.</p>
<p><span class="bold"><strong>Throws:</strong></span> Nothing.</p>
<p>
</p>
<div class="variablelist"><table border="0" class="variablelist compact">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody><tr>
<td><p><span class="term">Postconditions:</span></p></td>
<td><p><code class="computeroutput">this-&gt;active() == false</code> </p></td>
</tr></tbody>
</table></div>
</li>
</ol></div>
</div>
</div>
</div>
<div class="copyright-footer">Copyright © 2022, 2023 Andrey Semashev<p>
        Distributed under the Boost Software License, Version 1.0. (See accompanying
        file LICENSE_1_0.txt or copy at <a href="https://www.boost.org/LICENSE_1_0.txt" target="_top">https://www.boost.org/LICENSE_1_0.txt</a>).
      </p>
</div>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="fd_deleter.html"><img src="../../../../../../doc/src/images/prev.png" alt="Prev"></a><a accesskey="u" href="../../reference.html#header.boost.scope.scope_exit_hpp"><img src="../../../../../../doc/src/images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="../../../../../../doc/src/images/home.png" alt="Home"></a><a accesskey="n" href="make_scope_exit.html"><img src="../../../../../../doc/src/images/next.png" alt="Next"></a>
</div>
</body>
</html>
